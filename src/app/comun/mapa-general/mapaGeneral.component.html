
<!--   *********************************** -->
<!--         Componente Mapa General       -->
<!--   *********************************** -->

    <!-- NUBES FONDO -->
    <div id="nubes">

    </div>

    <!-- Fondo Mapa -->
    <div id="mascaraNubes">
    </div>

    <div id="contenedorMapa" [ngClass]="{'mostrarNubes': appService.cargandoMapa}" #canvasMapa class="bordeDesarrollador">

        <!-- Fondo Mapa -->
        <div id="fondoMar">
            <img class="mar" src="./assets/General/Fondo-Papiro.png"/>
        </div>

        <pinch-zoom #pinchZoom id="pinch-zoom" [ngClass]="{'niebla': mostrarNieblaFija} " 
            [limitPan]="false" 
            [minPanScale]="1" 
            [disableZoomControl]="'disable'"
            [limit-zoom]="10">

            <div *ngIf="mostrarCentro" id="marcadorCentro"></div>

            <!-- Mapa Global -->
            <div *ngIf="appService.estadoInMap=='global'" class="contenedorMapaGlobal">

                <div class="contenedorMascara">
                    <img class="mapaMundo" src="../../../assets/Mapa/Mapa-Mundo.png"/>
                    <div class="contenedorMarcadoresZonas">
                        <img class="marcador zona1 animate__animated animate__infinite animate__pulse" src="../../../assets/Mapa/indicador.png" (click)="appService.cargarRegion('Asfaloth')">
                    </div>
                </div>

            </div>

            <!-- Mapa Isometrico -->
            <div [ngClass]="{'niebla': mostrarNiebla}" *ngIf="appService.estadoInMap=='region'" [style.transform]="'scale('+escalaMapaIsometrico+','+escalaMapaIsometrico+')'" class="contenedorMapaIsometrico">

                <div class="wrapper" [ngStyle]="{'transform': 'scale('+appService.escalaIsometrico+') translate('+traslacionIsometricoX+'px, '+traslacionIsometricoY+'px)'}">

            <div class="floor" [ngStyle]="{'transform': 'translate('+0+'px, '+0+'px) rotateX(55deg) rotateZ(45deg)'}">
                <!-- rotateX(55deg) rotateZ(45deg) -->
                  <div class="players">
                     <!-- player 1 -->
                     <div class="player animacionFocus" [ngStyle]="{'transform': 'translate('+(50*appService.radioRenderIsometrico)+'px, '+(50*appService.radioRenderIsometrico)+'px)'}">
                     </div>
                  </div>

                  <div id="flechasMovimiento">
                     <!-- Flecha NorEste -->
                     <div class="flecha" (click)="moverPersonaje('NorEste')" *ngIf="direccionMovimientoPermitido[0]"  [ngStyle]="{'transform': 'translate('+(50*(appService.radioRenderIsometrico))+'px, '+(50*(appService.radioRenderIsometrico-1))+'px) rotate(90deg)'}">
                     </div>
                     <!-- Flecha NorOeste -->
                     <div class="flecha" (click)="moverPersonaje('NorOeste')" *ngIf="direccionMovimientoPermitido[3]" [ngStyle]="{'transform': 'translate('+(50*(appService.radioRenderIsometrico-1))+'px, '+(50*appService.radioRenderIsometrico)+'px)'}">
                     </div>
                     <!-- Flecha SurEste -->
                     <div class="flecha" (click)="moverPersonaje('SurEste')" *ngIf="direccionMovimientoPermitido[1]" [ngStyle]="{'transform': 'translate('+(50*(appService.radioRenderIsometrico+1))+'px, '+(50*appService.radioRenderIsometrico)+'px) rotate(180deg)'}">
                     </div>
                     <!-- Flecha SurOeste -->
                     <div class="flecha" (click)="moverPersonaje('SurOeste')" *ngIf="direccionMovimientoPermitido[2]" [ngStyle]="{'transform': 'translate('+(50*appService.radioRenderIsometrico)+'px, '+(50*(appService.radioRenderIsometrico+1))+'px) rotate(-90deg)'}">
                     </div>
                  </div>
                
                     <div *ngFor="let fila of this.appService.renderIsometrico;let i = index" class="row">
                         <div *ngFor="let tile of this.appService.renderIsometrico[i];let j = index" 
                             data-cords='[tile.coordenadaX,tile.coordenadaY]' 
                             class="tile" 
                             [ngStyle]="{'height': tileHeight[i]+'px','width': tileWidth[j]+'px'}" 
                             [ngClass]="renderTile(tile.coordenadaX,tile.coodenadaY)" 
                             (click)="clickTile(tile.coordenadaX,tile.coodenadaY,$event)" 
                             (auxclick)="clickTileAux(tile.coordenadaX,tile.coodenadaY,$event)" >

                                <div *ngIf="desarrollo" [ngClass]="renderTile(tile.coordenadaX,tile.coodenadaY)" class="marcador"></div>
                                <img *ngIf="tile.tileImage!=0" class="imagenTile" src="assets/Mapa/Tiles/{{tile.tileImage}}.png"/>
                                <img *ngIf="tile.tileImageOverlay!=0" class="imagenTile" src="assets/Mapa/Tiles/{{tile.tileImageOverlay}}.png"/>
                                <img *ngIf="tile.ubicacionEspecial!=null" class="imagenMarcador" src="assets/Iconos/indicadores/{{renderImagenMarcador(tile.ubicacionEspecial)}}.png"/>

                         </div> 
                     </div>

                  </div> 
                </div>
            </div>

            <div class="fogwrapper">
            </div> 

        </pinch-zoom>

        <!--
            <div class="fogwrapper">
                <div id="foglayer_01" class="fog">
                  <div class="image01"></div>
                  <div class="image02"></div>
                </div>
                <div id="foglayer_02" class="fog">
                  <div class="image01"></div>
                  <div class="image02"></div>
                </div>
                <div id="foglayer_03" class="fog">
                  <div class="image01"></div>
                  <div class="image02"></div>
                </div> 
            </div> 
        -->
    </div>



