

<!--   ******************* -->
<!--     DISEÑO DE FONDO   -->
<!--   ******************* -->

<!-- Diseño Fondo -->
<div class="fondo" id="fondo">
  <img alt="Fondo-papiro" class="fondoPapiro" src="./assets/General/Fondo-Papiro.png"/>
</div>

<!--   ******************* -->
<!--      PANEL GENERAL    -->
<!--   ******************* -->

<panelGeneralComponent id="PanelGeneral" (comandoPanelGeneral)="comandoPanelGeneral($event)"></panelGeneralComponent>

<!--   ******************* -->
<!--      Tiempo    -->
<!--   ******************* -->

<div id="tiempo">
  <img class="barraTiempo" src="../../../assets/tiempo/panel-tiempo.png">
  <botonComponent mat-button (click)="appService.centrarMapa()" [texto]="'Centrar'" [tipoBoton]="2" [color]="'violeta'" class="botonCentrar"></botonComponent>
  @if (inmapService.estadoInMap=='global') {
    <botonComponent mat-button (click)="inmapService.toggleInMap()" [texto]="'Región'" [tipoBoton]="2" [color]="'violeta'" class="botonToggleInMap"></botonComponent>
  }
  @if (inmapService.estadoInMap=='region') {
    <botonComponent mat-button (click)="inmapService.toggleInMap()" [texto]="'Global'" [tipoBoton]="2" [color]="'violeta'" class="botonToggleInMap"></botonComponent>
  }
</div>

<!--   ************************** -->
<!--    CONTENEDOR MAIN WINDOW    -->
<!--   ************************** -->

<div id="contenedorMainWindow">


  <!--   ******************* -->
  <!--        Credito      -->
  <!--   ******************* -->

  <!--
  <creditoComponent id="creditoMapa" [gemas]= "0" [monedas]= "0"></creditoComponent>
  -->


  <!--   ******************* -->
  <!--      Configuracion    -->
  <!--   ******************* -->

  <img id="iconoConfiguracion" src="../../../assets/Iconos/Icono-Configuracion.png" (click)="abrirConfiguracion()"/>

  <!--   ******************* -->
  <!--      Social    -->
  <!--   ******************* -->

  <!--
  <img id="iconoSocial" src="../../../assets/Iconos/Icono-Social.png" (click)="abrirSocial()"/>
  -->

  <!--   ******************* -->
  <!--      ICONO RELOAD    -->
  <!--   ******************* -->

  <img id="iconoReload" src="../../../assets/desarrollador/reload.png" (click)="appService.reloadPage()"/>

  <!--   ******************* -->
  <!--      Desarrollador    -->
  <!--   ******************* -->

  <!--
  <img id="botonAbrirEvento" src="../../../assets/desarrollador/animacion.png" (click)="appService.centrarRegion()"/>
  -->


  <!--   ******************* -->
  <!--        Experiencia    -->
  <!--   ******************* -->

  <experienciaComponent id="experiencia"></experienciaComponent>

  <!--   ******************* -->
  <!--      Panel Control    -->
  <!--   ******************* -->

  @if (sesion.iniciada) {
    <panelControlComponent id="panelControl"
      [tipo]="'inMap'"
      [mensajeControl]="inmapService.mensajeControl"
      [movimientoRestante]="inmapService.movimientoRestante"
      (comandoPanelControl)="comandoPanelControl($event)" >
    </panelControlComponent>
  }

  @if (!sesion.iniciada && inmapService.estadoInMap =='region') {
    <div id="botonIniciarPartida">
      <botonComponent mat-button (click)="inmapService.peticionIniciarPartida()" [ngClass]="{'botonDeshabilitado': !sesion.jugadores[estadoApp.jugadorPropioSesionIndex]?.lider}" [texto]="'Iniciar Aventura'" [tipoBoton]="2" [color]="'naranja'"></botonComponent>
    </div>
  }


  <!--   ******************* -->
  <!--      Paneles Heroes   -->
  <!--   ******************* -->
  <div id="contenedorHeroes">

    @for (heroe of this.inmapService.sesion.render.heroes; track heroe; let i = $index) {
      <heroeComponent [desplegable]="true" [lider]="sesion.jugadores[i].lider" [renderHeroe]="heroe" [seleccionable]="false" [pantalla]="'inMap'" class="panelHeroe"></heroeComponent>
    }

  </div>

  <!--   ******************* -->
  <!--          MAPA         -->
  <!--   ******************* -->

  <div id="ContenedorMapa">
    <!--<img class="mapaMundo" src="../../../assets/Mapa/Mapa-Mundo.png"/>-->
    <mapaGeneralComponent id="mapaGeneralComponent"
      (comandoMapaGeneral)="comandoPanelGeneral($event)"
      [coordenadas]="sesion.render.inmap"
      [radioRenderIsometrico]="6"
      [herramientaInMap]="'InMap'"
      [esTurnoPropio]="inmapService.checkTurnoPropio()"
      [mostrarNiebla]="true">
      <!--appService.estadoInMap=='region'-->
    </mapaGeneralComponent>
  </div>

  <img id="brujula" src="../../../assets/Mapa/brujula.png"/>

</div> <!-- Fin Contenedor Main Window -->

<!--   ******************* -->
<!--          NOCHE      -->
<!--   ******************* -->
@if (inmapService.mostrarNoche) {
  <div id="contenedorNoche">
    <img src="../assets/Iconos/luna.png" class="imagenLuna"/>
    <div class="contenedorTextoNoche">
      <div class="textoNoche slide1 visible"> Empieza a anochecer... </div>
      <div class="textoNoche slide2 visible"> La noche está tranquila... </div>
    </div>
  </div>
}

<!--   ******************* -->
<!--          PANELES      -->
<!--   ******************* -->

<div id="ContenedorPaneles">
  {{pantalla}}
  @if (this.pantalla == 'Personaje') {
    <div class="panel panelPersonaje">
      <panelPersonajeComponent></panelPersonajeComponent>
    </div>
  }

  @if (pantalla == 'Equipo') {
    <div class="panel panelPersonaje">
      <panelEquipoComponent></panelEquipoComponent>
    </div>
  }

  @if (pantalla =='Mazmorra') {
    <div class="panel panelMazmorra">
      <panelUbicacionComponent [sesion]="this.inmapService.sesion"></panelUbicacionComponent>
    </div>
  }

  @if (pantalla =='Diario') {
    <div class="panel panelMazmorra">
      <panelDiarioComponent></panelDiarioComponent>
    </div>
  }

  @if (pantalla =='Tienda') {
    <div class="panel panelMazmorra">
      <panelTiendaComponent></panelTiendaComponent>
    </div>
  }
</div>

